{% extends '_base.html' %}
{% block content %}

<div class="container mt-3" style="width: 600px;">
    <form action="{% url "upload-data-view" %}" method="POST" enctype="multipart/form-data" id="csvSubmitForm"> 
        {% csrf_token %}
        <div class="form-group">
            <label for="name" class="mb-3">Choose file: </label>
            <input type="file" name="csv_file" id="csv_file" required="True" class="form-control">
        </div>
        <!--
        <div class="form-group">                    
            <button class="btn btn-primary mt-3">Upload file</button>
        </div>
        -->
    </form>

    <table class="mt-5">
        <thead>
            <tr>
                <th>Name</th>
                <th>Start</th>
                <th>End</th>
            </tr>
        </thead>
        <tbody>
        {% for line in data_dict %}
            <tr>
                {% for key,value in line.items %}
                    <td>{{ value }}</td>
                {% endfor %}
            </tr>
        {% endfor %}
        </tbody>
    </table>
    <hr class="mt-5">
    <a href="{% url 'home-view' %}" class="btn btn-secondary">Go back</a>
</div>

<script>
document.querySelector("#csv_file").addEventListener("change", () => {
    document.querySelector("#csvSubmitForm").submit();
});
</script>

{% endblock %}